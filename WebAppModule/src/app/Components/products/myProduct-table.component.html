<div class="card-body">
  <mat-button-toggle-group [ngModel]="sortBy" (ngModelChange)="changeSort($event)" id="order-select">
    <mat-button-toggle disabled>Sort By:</mat-button-toggle>
    <mat-button-toggle value="name">Name</mat-button-toggle>
    <mat-button-toggle value="dateExp">Date expire</mat-button-toggle>
    <mat-button-toggle value="dateAdd">Date added</mat-button-toggle>
  </mat-button-toggle-group>
</div>

<div class="card-body">
  <div class="table-responsive">
    <table id="ProductsTable" class="table table-striped table-hover" style="width: 100%">
      <thead>
      <tr>
        <th style="width: 2%"></th>
        <th style="width: 60%; text-align: left;">Product</th>
        <th style="width: 10%">Quantity</th>
        <th style="width: 10%">Expire Date</th>
        <th style="width: 3%">Edit</th>
        <th style="width: 3%">Archive</th>
      </tr>
      </thead>
      <tbody *ngFor="let visibleProduct of visibleProducts">
      <tr>
        <td>
          <input type="checkbox" id="{{visibleProduct?.idProduct}}"
                 name="{{visibleProduct?.idProduct}}"
                 value="{{visibleProduct?.idProduct}}">
        </td>
        <td class="product-name">
          {{visibleProduct?.productName}}
        </td>
        <td (mouseover)="toggleShow(visibleProduct.idProduct)">
          {{visibleProduct?.amountLeft}}{{visibleProduct.productSizeType}}
          <button *ngIf="isShown[visibleProduct.idProduct]" mat-icon-button [matMenuTriggerFor]="menu">
            <mat-icon>mode_edit</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button *ngIf="visibleProduct.amountLeft>1000"
                    (click)="updateProduct(visibleProduct.idProduct, 1000, visibleProduct.amountLeft)" mat-menu-item>
              <span>1000{{visibleProduct.productSizeType}}</span>
            </button>
            <button *ngIf="visibleProduct.amountLeft>500"
                    (click)="updateProduct(visibleProduct.idProduct, 500, visibleProduct.amountLeft)" mat-menu-item>
              <span>500{{visibleProduct.productSizeType}}</span>
            </button>
            <button *ngIf="visibleProduct.amountLeft>250 && visibleProduct.productSizeType!= 'psc'"
                    (click)="updateProduct(visibleProduct.idProduct, 250, visibleProduct.amountLeft)" mat-menu-item>
              <span>Glass 250{{visibleProduct.productSizeType}}</span>
            </button>
            <button *ngIf="visibleProduct.amountLeft>15 && visibleProduct.productSizeType!= 'psc'"
                    (click)="updateProduct(visibleProduct.idProduct, 15, visibleProduct.amountLeft)" mat-menu-item>
              <span>Tablespoon 15{{visibleProduct.productSizeType}}</span>
            </button>
            <button *ngIf="visibleProduct.amountLeft>5 && visibleProduct.productSizeType != 'pcs'"
                    (click)="updateProduct(visibleProduct.idProduct, 5, visibleProduct.amountLeft)" mat-menu-item>
              <span>Teaspoon 5{{visibleProduct.productSizeType}}</span>
            </button>
            <button *ngIf=" visibleProduct.productSizeType == 'pcs'"
                    (click)="updateProduct(visibleProduct.idProduct, 1, visibleProduct.amountLeft)" mat-menu-item>
              <span>1 {{visibleProduct.productSizeType}}</span>
            </button>
            <button *ngIf="visibleProduct.servingSize && visibleProduct.amountLeft>visibleProduct.servingSize"
                    (click)="updateProduct(visibleProduct.idProduct, visibleProduct.servingSize, visibleProduct.amountLeft)"
                    mat-menu-item>
              <span>Suggested serving size:{{visibleProduct.servingSize}} {{visibleProduct.productSizeType}}</span>
            </button>
            <button (click)="archive(visibleProduct.idProduct, visibleProduct.productName)" mat-menu-item>
              <span>All: {{visibleProduct.amountLeft}} {{visibleProduct.productSizeType}}</span>
            </button>
          </mat-menu>
        </td>
        <td>
          {{visibleProduct?.expireDate | date:'dd-MM-y'}}
        </td>
        <td>
          <button mat-icon-button [routerLink]="['/MyProducts/edit/' + visibleProduct?.idProduct]">
            <mat-icon>mode</mat-icon>
          </button>
        </td>
        <td>
          <button mat-icon-button (click)="archive(visibleProduct.idProduct, visibleProduct.productName)">
            <mat-icon class="archive">archive</mat-icon>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
